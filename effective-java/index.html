<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>이펙티브 자바 1~30 - h3yon blog</title><meta name="Description" content="Welcome to h3yon 개구리 블로그"><meta property="og:title" content="이펙티브 자바 1~30" />
<meta property="og:description" content="이펙티브 자바 Item1. 생성자 대신 정적 팩토리 메서드를 고려하라 정적 팩토리 메서드(static factory method)는 그 클래스의 인스턴스를 반환하는 단순한 정적 메서드이다.
1 2 3 4 5  //생성자 Boolean a = Boolean(&#34;true&#34;) //정적 팩토리 메서드 Boolean a= Boolean.valueOf(&#34;true&#34;);   아래와 같은 장점을 가질 수 있다.
 생성자와 달리 이름을 가질 수 있다. 호출될 때마다 인스턴스를 새로 생성하지 않아도 된다. 반환 타입의 하위 타입 객체를 반환할 수 있다. Java8 이전에는 인스턴스에 static 메서드를 선언할 수 없어 Companion class를 만들어 거기에 정의를 했어야 했다." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://h3yon.github.io/effective-java/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-28T01:50:34+09:00" />
<meta property="article:modified_time" content="2022-03-28T01:50:34+09:00" /><meta property="og:site_name" content="My cool site" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="이펙티브 자바 1~30"/>
<meta name="twitter:description" content="이펙티브 자바 Item1. 생성자 대신 정적 팩토리 메서드를 고려하라 정적 팩토리 메서드(static factory method)는 그 클래스의 인스턴스를 반환하는 단순한 정적 메서드이다.
1 2 3 4 5  //생성자 Boolean a = Boolean(&#34;true&#34;) //정적 팩토리 메서드 Boolean a= Boolean.valueOf(&#34;true&#34;);   아래와 같은 장점을 가질 수 있다.
 생성자와 달리 이름을 가질 수 있다. 호출될 때마다 인스턴스를 새로 생성하지 않아도 된다. 반환 타입의 하위 타입 객체를 반환할 수 있다. Java8 이전에는 인스턴스에 static 메서드를 선언할 수 없어 Companion class를 만들어 거기에 정의를 했어야 했다."/>
<meta name="application-name" content="My cool site">
<meta name="apple-mobile-web-app-title" content="My cool site"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://h3yon.github.io/effective-java/" /><link rel="prev" href="https://h3yon.github.io/mock-spy-testcode/" /><link rel="next" href="https://h3yon.github.io/spring-core1/" /><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "이펙티브 자바 1~30",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/h3yon.github.io\/effective-java\/"
        },"genre": "posts","keywords": "java","wordcount":  1901 ,
        "url": "https:\/\/h3yon.github.io\/effective-java\/","datePublished": "2022-03-28T01:50:34+09:00","dateModified": "2022-03-28T01:50:34+09:00","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "h3yon"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="h3yon blog">My cool site</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> Posts </a><a class="menu-item" href="/tags/"> Tags </a><a class="menu-item" href="/categories/"> Categories </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="h3yon blog">My cool site</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/posts/" title="">Posts</a><a class="menu-item" href="/tags/" title="">Tags</a><a class="menu-item" href="/categories/" title="">Categories</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">이펙티브 자바 1~30</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="https://github.com/h3yon" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>h3yon</a>
</span>&nbsp;<span class="post-category">included in <a href="/categories/java/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>java</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2022-03-28">2022-03-28</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;1901 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;9 minutes&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#item1-생성자-대신-정적-팩토리-메서드를-고려하라">Item1. 생성자 대신 정적 팩토리 메서드를 고려하라</a>
      <ul>
        <li><a href="#정적-팩토리-메서드-네이밍-방식">정적 팩토리 메서드 네이밍 방식</a></li>
      </ul>
    </li>
    <li><a href="#item2-생성자에-매개변수가-많다면-빌더를-고려하라">Item2. 생성자에 매개변수가 많다면 빌더를 고려하라</a></li>
    <li><a href="#item3-private-생성자나-열거-타입으로-싱글턴임을-보증하라">Item3. private 생성자나 열거 타입으로 싱글턴임을 보증하라</a></li>
    <li><a href="#item4-인스턴스화를-막으려거든-private-생성자를-사용하라">Item4. 인스턴스화를 막으려거든 private 생성자를 사용하라.</a></li>
    <li><a href="#item5-자원을-직접-명시하지-말고-의존-객체-주입을-사용하라">Item5. 자원을 직접 명시하지 말고 의존 객체 주입을 사용하라.</a></li>
    <li><a href="#item6-불필요한-객체-생성을-피하라">Item6. 불필요한 객체 생성을 피하라.</a></li>
    <li><a href="#item7-다-쓴-객체-참조를-해제하라">Item7. 다 쓴 객체 참조를 해제하라</a></li>
    <li><a href="#item8-finalizer-cleaner-사용을-피하라">Item8. finalizer, cleaner 사용을 피하라</a></li>
    <li><a href="#item9-try-finally-보다는-try-with-resuorces를-사용하라">Item9. try-finally 보다는 try-with-resuorces를 사용하라.</a></li>
    <li><a href="#item10-equals는-일반-규약을-지켜-재정의하라">Item10. equals는 일반 규약을 지켜 재정의하라</a></li>
    <li><a href="#item11-14-재정의-comparable">Item11-14 재정의, Comparable</a></li>
    <li><a href="#item15-16-클래스와-멤버">Item15-16 클래스와 멤버</a></li>
    <li><a href="#item18-22-상속">Item18-22 상속</a></li>
    <li><a href="#item24-멤버-클래스는-되도록-static으로-만들라">Item24. 멤버 클래스는 되도록 static으로 만들라</a></li>
    <li><a href="#item25-톱레벨-클래스는-한-파일에-하나만-담으라">Item25. 톱레벨 클래스는 한 파일에 하나만 담으라</a></li>
    <li><a href="#item26-로-타입은-사용하지-말라">Item26. 로 타입은 사용하지 말라</a>
      <ul>
        <li><a href="#타입">타입</a></li>
      </ul>
    </li>
    <li><a href="#item27-비검사-경고를-제거하라">Item27. 비검사 경고를 제거하라</a></li>
    <li><a href="#item28-배열보다는-리스트를-사용하라">Item28. 배열보다는 리스트를 사용하라</a></li>
    <li><a href="#item29-30-이왕이면-제네릭-타입으로-만들라">Item29-30. 이왕이면 제네릭 타입으로 만들라</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h1 id="이펙티브-자바">이펙티브 자바</h1>
<h2 id="item1-생성자-대신-정적-팩토리-메서드를-고려하라">Item1. 생성자 대신 정적 팩토리 메서드를 고려하라</h2>
<p>정적 팩토리 메서드(static factory method)는 그 <code>클래스의 인스턴스를 반환</code>하는 단순한 정적 메서드이다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//생성자
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">Boolean</span> <span class="n">a</span> <span class="o">=</span> <span class="n">Boolean</span><span class="o">(</span><span class="s">&#34;true&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//정적 팩토리 메서드
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">Boolean</span> <span class="n">a</span><span class="o">=</span> <span class="n">Boolean</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="s">&#34;true&#34;</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>아래와 같은 장점을 가질 수 있다.</p>
<ol>
<li>생성자와 달리 이름을 가질 수 있다.</li>
<li>호출될 때마다 인스턴스를 새로 생성하지 않아도 된다.</li>
<li>반환 타입의 하위 타입 객체를 반환할 수 있다.
Java8 이전에는 인스턴스에 static 메서드를 선언할 수 없어 Companion class를 만들어 거기에 정의를 했어야 했다. → 8이후부터는 <code>interface에 static 메서드 선언 가능</code></li>
<li>입력 매개변수 따라 매번 다른 클래스의 객체를 반환할 수 있다.</li>
<li>코드 작성 시점에 반환할 객체의 클래스가 존재하지 않아도 된다.
ex) DriverManager.getConnection, Class.forName 때문에</li>
</ol>
<p>단점은 아래와 같다.</p>
<ol>
<li>상속이 불가능</li>
<li>프로그래머가 정적 팩토리 메서드를 찾기 어려워 한다.
→ 생성자처럼 설명에 명확히 드러나 있지 않아서</li>
</ol>
<h3 id="정적-팩토리-메서드-네이밍-방식">정적 팩토리 메서드 네이밍 방식</h3>
<ul>
<li>
<p>from</p>
<p>매개변수 하나를 받아 해당 타입의 인스턴스 반환</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">Date</span> <span class="n">d</span> <span class="o">=</span> <span class="n">Date</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">instant</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>of</p>
<p>여러 매개변수 받아 인스턴스 반환</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">alphabets</span> <span class="o">=</span> <span class="n">Set</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">&#34;a&#34;</span><span class="o">,</span> <span class="s">&#34;b&#34;</span><span class="o">,</span> <span class="s">&#34;c&#34;</span><span class="o">);</span> 
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>valueOf</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">BigInteger</span> <span class="n">bigInts</span> <span class="o">=</span> <span class="n">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">Integer</span><span class="o">.</span><span class="na">MAX_VALUE</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>instance / getInstance</p>
<p>명시한 인스턴스를 반환하나 같은 인스턴스임을 보장하진 X</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">Fruit</span> <span class="n">fruit</span> <span class="o">=</span> <span class="n">Fruit</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="n">inputs</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>create / newInstance</p>
<p>매번 새로운 인스턴스를 생성해 반환 보장</p>
</li>
<li>
<p>getType</p>
<p>getInstance와 같으나, 다른 클래스에 팩토리 메서드를 정의할 때 쓴다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">FileStore</span> <span class="n">fs</span> <span class="o">=</span> <span class="n">Files</span><span class="o">.</span><span class="na">getFileStore</span><span class="o">(</span><span class="n">Path</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>newType</p>
<p>newInstance와 같으나, 다른 클래스에 팩토리 메서드를 정의할 때 사용.</p>
</li>
<li>
<p>type</p>
<p>getType과 newType의 간결한 버전</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">List</span><span class="o">&lt;</span><span class="n">Fruit</span><span class="o">&gt;</span> <span class="n">fruits</span> <span class="o">=</span> <span class="n">Collections</span><span class="o">.</span><span class="na">list</span><span class="o">(</span><span class="n">manyFruits</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h2 id="item2-생성자에-매개변수가-많다면-빌더를-고려하라">Item2. 생성자에 매개변수가 많다면 빌더를 고려하라</h2>
<h2 id="item3-private-생성자나-열거-타입으로-싱글턴임을-보증하라">Item3. private 생성자나 열거 타입으로 싱글턴임을 보증하라</h2>
<p>클래스를 싱글톤으로 만들면, 이를 사용하는 클라이언트를 테스트하기 어려워질 수 있다. mocking하기 어렵기 때문이다. 싱글턴을 생성하는 방법은</p>
<ol>
<li>
<p>생성자는 private으로,</p>
</li>
<li>
<p>1)public static 멤버를 하나 마련하여 유일하게 인스턴스에 접근하게 하거나,</p>
<p>(권한이 있는 클라이언트는 리플렉션 API인 AccessibleObject.setAccessible로 private 생성자를 호출할 수 있다.)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SingleFruit</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">SingleFruit</span> <span class="n">INSTANCE</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SingleFruit</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="nf">SingleFruit</span><span class="o">(){</span> <span class="o">...</span> <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>2)정적 팩토리 메서드를 public static 멤버로 제공하는 방법,</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SingleFruit</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">SingleFruit</span> <span class="n">INSTANCE</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SingleFruit</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="nf">SingleFruit</span><span class="o">(){</span> <span class="o">...</span> <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="n">SingleFruit</span> <span class="nf">getInstance</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">INSTANCE</span><span class="o">;</span> <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>3)<strong>원소가 하나인 열거 타입을 선언하는 방법</strong> 3가지가 있다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">enum</span> <span class="n">SingleFruit</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">INSTANCE</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>대부분 3번째 방법이 좋다.</p>
</li>
</ol>
<h2 id="item4-인스턴스화를-막으려거든-private-생성자를-사용하라">Item4. 인스턴스화를 막으려거든 private 생성자를 사용하라.</h2>
<h2 id="item5-자원을-직접-명시하지-말고-의존-객체-주입을-사용하라">Item5. 자원을 직접 명시하지 말고 의존 객체 주입을 사용하라.</h2>
<p>정적 유틸리티를 사용할 때,</p>
<ol>
<li>
<p>생성자를 private으로 하는 방법</p>
</li>
<li>
<p>싱글톤 방식으로 사용하는 방법</p>
</li>
</ol>
<p>이 2가지 방법을 많이 볼 수 있다.</p>
<p>사용하는 자원에 따라 동작이 달라지는 클래스에는 정적 유틸리티 클래스나 싱글턴 방식이 적합하지 않다.</p>
<p>ex) 특정 Dictionary 하나를 사용하는 유틸리티가 있다면 위 2가지 방법으로 사용할 수 있는데, 만약 요구사항이 들어와 String이 들어오면 StringDictionary, Int가 들어오면 IntDictionary를 리턴해야 한다고 가정하자. 이 경우 멀티 스레드 환경에서 사용할 수 없고 사용하는 자원에 따라 동작이 달라진다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">RightDictionary</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">	<span class="kd">private</span> <span class="kd">final</span> <span class="n">StringDictionary</span> <span class="n">dictionary</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">	<span class="kd">public</span> <span class="nf">RightDictionary</span><span class="o">(</span><span class="n">StringDictionary</span> <span class="n">Dictionary</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">		<span class="k">this</span><span class="o">.</span><span class="na">dictionary</span> <span class="o">=</span> <span class="n">dictionary</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">	<span class="o">}</span>
</span></span><span class="line"><span class="cl">	<span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="item6-불필요한-객체-생성을-피하라">Item6. 불필요한 객체 생성을 피하라.</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//절대 안 됨 - 문자열 인스턴스 계속 생성
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">String</span> <span class="n">s</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="s">&#34;s&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//개선 - 같은 문자열을 사용하면 같은 객체 재사용
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">String</span> <span class="n">s</span> <span class="o">=</span> <span class="s">&#34;s&#34;</span><span class="o">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>str.matches도 그렇다.</p>
<p>성능이 중요한 상황에서 예제1처럼 반복해 사용하기보단 예제2로 사용하는 게 낫다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//예제1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">isStartAbc</span><span class="o">(</span><span class="n">String</span> <span class="n">str</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">str</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="s">&#34;^abc*&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//예제2
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Checker</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">	<span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Pattern</span> <span class="n">ABC_PATTERN</span> <span class="o">=</span> <span class="n">Pattern</span><span class="o">.</span><span class="na">compile</span><span class="o">(</span><span class="s">&#34;^abc*&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">isStartAbc</span><span class="o">(</span><span class="n">String</span> <span class="n">str</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="n">ABC_PATTERN</span><span class="o">.</span><span class="na">matcher</span><span class="o">(</span><span class="n">str</span><span class="o">).</span><span class="na">matches</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">	<span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="item7-다-쓴-객체-참조를-해제하라">Item7. 다 쓴 객체 참조를 해제하라</h2>
<p>자바의 경우 가비지 컬렉터 때문에 메모리 관리에 있어 편해진다.</p>
<p>하지만 메모리 누수 때문에 가비지 컬렉션 활동과 메모리 사용량이 늘어나 성능이 저하되고 심하면 OOM(OutOfMemory)으로 프로그램이 종료되기도 할 수 있다.</p>
<p>메모리 누수를 찾는 것이 어려운데, 객체 참조 하나를 살려두면 GC(Garbage Collector)는 모든 걸 회수해가지 못한다. 그래서 아래처럼 원소 참조가 더 이상 필요없어지면 <code>null 처리(참조 해제)해줄 수 있</code>다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="n">Object</span> <span class="nf">pop</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">	<span class="n">Object</span> <span class="n">result</span> <span class="o">=</span> <span class="n">elements</span><span class="o">[--</span><span class="n">size</span><span class="o">];</span>
</span></span><span class="line"><span class="cl">	<span class="n">elements</span><span class="o">[</span><span class="n">size</span><span class="o">]</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">result</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>그럼 매번 이렇게 null로 해줘야 할까? 아니다.<code>null 처리 해주는 것은 예외적인 경우</code>여야 한다.</p>
<p>스택 클래스는 자기 메모리를 직접 관리하여 메모리 누수에 취약하다. 비활성 영역은 쓰이지 않는다. GC가 보기엔 비활성 영역 객체도 활성 영역과 같이 유효한 객체로 본다.</p>
<p>→ 자기 메모리를 직접 관리하는 클래스의 경우에 메모리 누수에 주의해야 한다.</p>
<dl>
<dt>→ <code>캐시</code> 역시 메모리 누수를 일으키는 주범이다.</dt>
<dd>
<p><code>WeakHashMap</code> - 엔트리가 살아 있는 캐시가 필요한 경우 사용한다. 다 쓴 엔트리는 즉시 자동으로 제거된다.</p>
</dd>
<dd>
<p>근데 캐시 엔트리 유효 기간을 모르니, 점점 엔트리 <code>가치를 떨어뜨리는 방식</code>을 흔히 사용한다. 쓰지않는 엔트리는 백그라운드 스레드를 활용하거나, 새 엔트리를 추가할 때 부수 작업을 수행함으로써 청소해줘야 한다.</p>
</dd>
</dl>
<h2 id="item8-finalizer-cleaner-사용을-피하라">Item8. finalizer, cleaner 사용을 피하라</h2>
<p>두가지 객체 소멸자 finalizer, cleaner가 있는데, 예측할 수 없고 성능에 위험할 수 있다. 보안 문제를 야기할 수 있다.</p>
<p>자바 라이브러리의 일부 클래스는 안전망 역할의 finalizer를 제공한다. (FileInputSystem, FileOutputSystem, ThreadpoolExecutor가 대표적이다)</p>
<h2 id="item9-try-finally-보다는-try-with-resuorces를-사용하라">Item9. try-finally 보다는 try-with-resuorces를 사용하라.</h2>
<p>자원 2개를 사용해야 할 때 try-finally방식을 보자.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">static</span> <span class="kt">void</span> <span class="nf">copy</span><span class="o">(</span><span class="n">String</span> <span class="n">src</span><span class="o">,</span> <span class="n">String</span> <span class="n">dst</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">InputStream</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="n">src</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">	<span class="k">try</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">OutputStream</span> <span class="n">out</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="n">dst</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">		<span class="k">try</span> <span class="o">{</span> 
</span></span><span class="line"><span class="cl">				<span class="c1">//...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>				<span class="n">out</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">buf</span><span class="o">,</span> <span class="n">0</span><span class="o">,</span> <span class="n">n</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">		<span class="o">}</span> <span class="k">finally</span> <span class="o">{</span> <span class="n">out</span><span class="o">.</span><span class="na">close</span><span class="o">();</span> <span class="o">}</span>
</span></span><span class="line"><span class="cl">	<span class="o">}</span><span class="k">finally</span><span class="o">{</span><span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>예외는 try, finally 둘다 발생할 수 있어 close 메서드가 실패할 수 있다.</p>
<p>또 첫번째 예외를 기록하도록 코드 수정하면 코드가 너무 지저분해진다.</p>
<p>이런 문제들은 try-with-resources로 모두 해결되었다.(정확하고 쉽게 자원을 회수할 수 있다)</p>
<p>또, 닫아야 하는 자원을 뜻하는 클래스를 작성한다면 AutoCloseable 인터페이스를 구현해야 한다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">static</span> <span class="kt">void</span> <span class="nf">copy</span><span class="o">(</span><span class="n">String</span> <span class="n">src</span><span class="o">,</span> <span class="n">String</span> <span class="n">dst</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">try</span><span class="o">(</span><span class="n">InputStream</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="n">src</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">		<span class="n">OutputStream</span> <span class="n">out</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="n">dst</span><span class="o">);){</span>
</span></span><span class="line"><span class="cl">		<span class="c1">//...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">out</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">buf</span><span class="o">,</span> <span class="n">0</span><span class="o">,</span> <span class="n">n</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">	<span class="o">}</span><span class="k">finally</span><span class="o">{</span><span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="item10-equals는-일반-규약을-지켜-재정의하라">Item10. equals는 일반 규약을 지켜 재정의하라</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Override</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="o">(</span><span class="n">Object</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="o">(</span><span class="n">o</span> <span class="k">instanceof</span> <span class="n">String</span><span class="o">)</span> <span class="k">return</span> <span class="n">s</span><span class="o">.</span><span class="na">equalsIgnoreCase</span><span class="o">((</span><span class="n">String</span><span class="o">)</span> <span class="n">o</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>“Polish”.equals(”polish”)를 사용하면, false를 리턴할 것이다. 이렇게 대칭성을 위반하는 경우를 볼 수 있다.</p>
<p>추이성도 있다. 추이성은 1,2번째 객체가 같고, 2,3번째 객체가 같다면, 1,3번째 객체도 같아야 한다는 것이다.</p>
<p>예를 들어 좌표 Point의 equals()가 아래처럼 있다고 가정하자.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Point</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">	<span class="o">...</span>
</span></span><span class="line"><span class="cl">	<span class="nd">@Override</span> <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="o">(</span><span class="n">Object</span> <span class="n">o</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span><span class="o">(!(</span><span class="n">o</span> <span class="k">instanceof</span> <span class="n">Point</span><span class="o">))</span> <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="n">o</span><span class="o">.</span><span class="na">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">&amp;&amp;</span> <span class="n">o</span><span class="o">.</span><span class="na">y</span> <span class="o">=</span> <span class="n">y</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">	<span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>좌표 Point에 색을 입히고 싶어, Point를 상속한 ColorfulPoint가 나타났다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ColorfulPoint</span> <span class="kd">extends</span> <span class="n">Point</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">	<span class="o">...</span>
</span></span><span class="line"><span class="cl">	<span class="nd">@Override</span> <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="o">(</span><span class="n">Object</span> <span class="n">o</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span><span class="o">(!(</span><span class="n">o</span> <span class="k">instanceof</span> <span class="n">ColorfulPoint</span><span class="o">))</span> <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="kd">super</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">o</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="n">o</span><span class="o">.</span><span class="na">color</span> <span class="o">=</span> <span class="n">color</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">	<span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>아래 두 객체가 있다고 가정하자.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">Point</span> <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Point</span><span class="o">(</span><span class="n">1</span><span class="o">,</span><span class="n">2</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">ColorfulPoint</span> <span class="n">cp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ColorfulPoint</span><span class="o">(</span><span class="n">1</span><span class="o">,</span> <span class="n">2</span><span class="o">,</span> <span class="n">Color</span><span class="o">.</span><span class="na">BLUE</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>p.equals(cp)는 true, cp.equals(p)는 p가 ColorfulPoint가 아니기 때문에 false가 나타날 것이다. 그럼 추이성을 깨버린다.</p>
<p>→ 구체 클래스를 확장해 새로운 값을 추가하면서 equals 규약을 만족시킬 방법은 존재하지 않는다.</p>
<p>→ 꼭 필요한 경우가 아니라면 equals를 재정의하지 말자.</p>
<h2 id="item11-14-재정의-comparable">Item11-14 재정의, Comparable</h2>
<ul>
<li>
<p><strong>Item11. equals를 재정의하려거든 hashCode도 재정의하라</strong></p>
<p>Object에서, equals(Object)가 두 객체를 같다고 판단했다면, 두 객체의 hashCode는 똑같은 값을 반환해야 한다고 명세했다.</p>
</li>
<li>
<p><strong>Item12. toString을 항상 재정의하라.</strong></p>
<p>유익한 정보를 반환하며, 디버깅을 수월하게 해준다.</p>
</li>
<li>
<p><strong>Item13. clone 재정의는 주의해서 진행하라</strong></p>
<p>일반 클래스, 인터페이스에는 Cloneable을 구현/확장해서는 안 된다. final 클래스라면 위험이 크진 않지만, 드물게 허용해야 한다. 배열만은 clone 메서드 방식을 사용할 수 있다.(<em>더 알아보기</em>)</p>
</li>
<li>
<p><strong>Item14. Comparable을 구현할지 고려하라</strong></p>
<p>Comparable의 compareTo 메서드에서 &lt;, &gt;를 사용하는 것은 거추장스럽고 오류를 유발하여 이제는 추천하지 않는다. Comparator의 compare() 또는 비교자 생성 메서드를 사용하자.</p>
</li>
</ul>
<h2 id="item15-16-클래스와-멤버">Item15-16 클래스와 멤버</h2>
<ul>
<li>
<p><strong>Item15. 클래스와 멤버의 접근 권한을 최소화해라</strong></p>
<p>public 가변 필드를 갖는 클래스는 일반적으로 스레드 safe하지 않다.</p>
<p>정보 은닉으로 여러 컴포넌트를 병렬적으로 개발 가능하고, 관심사 분리, 재사용성 등의 장점이 있다.</p>
</li>
<li>
<p><strong>Item16. 클래스에서는 public 필드가 아닌 접근자 메서드를 사용하라</strong></p>
<p>getter/setter</p>
</li>
<li>
<p><strong>Item17. 변경 가능성을 최소화하라</strong></p>
<p>불변 클래스(ex)String, BigInteger, BigDecimal)는 가변 클래스보다 설계, 구현, 사용이 쉽고 오류의 여지도 적고 안전하다. 불변 객체는 스레드 safe하며 따로 동기화할 필요 없고 안심하고 공유할 수 있다.</p>
<p><strong>클래스를 불변으로 만드는 5가지 규칙</strong></p>
<p>: 클래스를 확장할 수 없게 한다. / 객체 상태를 변경하는 메서드를 제공하지 않는다 / 모든 필드를 final로 선언, private로 선언 / 자신 외에는 내부 가변 컴포넌트를 접근할 수 없게 한다.</p>
</li>
</ul>
<h2 id="item18-22-상속">Item18-22 상속</h2>
<ul>
<li>
<p><strong>Item18. 상속보다는 컴포지션을 사용하라.</strong></p>
<p>컴포지션: 기존 클래스가 새로운 클래스의 구성 요소로 쓰인다는 뜻에서 이러한 설계를 컴포지션이라고 한다.</p>
</li>
<li>
<p><strong>Item19. 상속을 고려해 설계하고 문서화하라. 그러지 않았다면 상속을 금지하라</strong></p>
</li>
<li>
<p><strong>Item20. 추상 클래스보다는 인터페이스를 우선하라</strong></p>
<p>다중 상속의 장점이 있고, 믹스인 정의에 안성맞춤이다.</p>
<ul>
<li>믹스인: 클래스가 구현할 수 있는 타입. 대상 타입의 주된 기능에 선택적 기능을 ‘혼합&rsquo;한다고 해서 믹스인이라고 부른다.</li>
</ul>
<p>인터페이스와 디폴트 메서드를 사용하는 방식이 많이 사용된다.</p>
</li>
<li>
<p><strong>Item21.인터페이스는 구현하는 쪽을 생각해 설계하라</strong></p>
<p>디폴트 메서드는 기존 구현체에 런타임 오류를 일으킬 수 있다.
새로운 메서드를 추가하면 커다란 위험도 딸려 온다.</p>
</li>
<li>
<p><strong>Item22. 인터페이스는 타입을 정의하는 용도로만 사용하라</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//아래 처럼 절대 사용하지 말자. 그냥 ABC;에서 끝내고 타입을 정의만 하자.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MyConstant</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">	<span class="kd">static</span> <span class="kd">final</span> <span class="kt">double</span> <span class="n">ABC</span> <span class="o">=</span> <span class="n">6</span><span class="o">.</span><span class="na">4323e23</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><strong>Item23. 태그 달린 클래스보다는 클래스 계층 구조를 활용하라.</strong></p>
<p>Point, Rectangle, Circle을 한 클래스에 몰아넣는 것보다는, 따로 분리하여 abstract class Point, class Rectangle 처럼 계층 구조로 활용하자.</p>
</li>
</ul>
<h2 id="item24-멤버-클래스는-되도록-static으로-만들라">Item24. 멤버 클래스는 되도록 static으로 만들라</h2>
<p><strong>정규화된 this</strong>? 클래스명.this 형태로 바깥 클래스 이름을 명시하는 용법</p>
<p><strong>중첩 클래스</strong>란 다른 클래스 안에 정의된 클래스를 말한다.</p>
<ul>
<li>
<p>정적 멤버 클래스</p>
<p>다른 클래스 안에 선언되고, 바깥 클래스의 private 멤버에도 접근 가능하다.</p>
<p><code>바깥 인스턴스에 접근할 일이 없다면 무조건 static을 붙여 정적 멤버 클래스로 만들자</code>.</p>
</li>
</ul>
<p>&lt;아래 3가지 = <strong>내부 클래스</strong>&gt;</p>
<ul>
<li>
<p>(비정적) 멤버 클래스</p>
<p>어댑터를 쓸 때 자주 쓰인다. 멤버 클래스가 인스턴스화할 때 바깥 인스턴스 사이의 관계과 확립되며, 변경 불가능하다.</p>
<p>참조가 명시적이지 않아 <code>메모리 누수</code>가 생길 수 있다.</p>
<p><code>멤버 클래스의 인스턴스 각각이 바깥 인스턴스를 참조한다면 비정적으로 만들자</code></p>
</li>
<li>
<p>익명 클래스</p>
<p>쓰이는 시점에 선언과 인스턴스가 만들어진다. 어디서든 만들 수 있다.</p>
<p>이제는 <code>람다로</code> 자리를 물려줬다.</p>
</li>
<li>
<p>지역 클래스</p>
<p>가장 드물게 사용된다. 지역변수 선언 가능한 곳이면 어디든 사용 가능하며, 유효범위도 지역변수와 같다.</p>
</li>
</ul>
<h2 id="item25-톱레벨-클래스는-한-파일에-하나만-담으라">Item25. 톱레벨 클래스는 한 파일에 하나만 담으라</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">Fruit</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">	<span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">MARKET</span> <span class="o">=</span> <span class="s">&#34;Fruit Market&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">Furniture</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">	<span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">MARKET</span> <span class="o">=</span> <span class="s">&#34;Furniture Market&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>위처럼 쓰지 말고, 다른 소스 파일로 분리해서 사용하자.</p>
<p>만약에 다른 java 파일에서 Fruit, Furniture 클래스를 작성하면 컴파일러가 이 상황을 캐치하지 못하고 Fruit.MARKET을 사용할 때마다 다른 값이 나올 수 있다.</p>
<p>굳이 위처럼 한 파일에 2개 클래스를 넣고 싶다면, 정적 멤버 클래스를 사용하는 방법을 고민할 수 있다.</p>
<h2 id="item26-로-타입은-사용하지-말라">Item26. 로 타입은 사용하지 말라</h2>
<p><code>로타입</code>? <strong>타입 매개변수가 없는 제테릭 타입</strong>. 로타입을 쓰면 제네릭이 안겨주는 안전성과 표현력을 모두 잃게 된다.</p>
<p>로타입의 예로 <strong>List, Collection, Object</strong> 가 있다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">private</span> <span class="kd">final</span> <span class="n">Collection</span> <span class="n">stamps</span> <span class="o">=</span> <span class="o">...;</span>
</span></span><span class="line"><span class="cl"><span class="n">stamps</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">Coin</span><span class="o">(...));</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>타입을 Collection으로 정하면 아무거나 다 넣을 수 있다.
하지만 위 예제처럼 stamps에서 Coin을 꺼내면 런타임 시 문제가 발생한다.</p>
<p>우리는 원소 타입을 몰라도 되는 로타입을 쓰고 싶어질 수 있다.</p>
<p>그때, <strong>비한정적 와일드카드 타입</strong>을 대신 사용하는 게 좋다.(로타입은 안전하지 않지만 와일드카드는 안전하다)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">static</span> <span class="kt">int</span> <span class="nf">FruitCounts</span><span class="o">(</span><span class="n">Set</span><span class="o">&lt;?&gt;</span> <span class="n">s1</span><span class="o">,</span> <span class="n">Set</span><span class="o">&lt;?&gt;</span> <span class="n">s2</span><span class="o">){</span> <span class="o">...</span> <span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>비한정적 와일드카드 타입</code>? <strong><code>List&lt;?&gt;</code>, Set<?></strong></p>
<h3 id="타입">타입</h3>
<table>
<thead>
<tr>
<th>한글 용어</th>
<th>예시</th>
</tr>
</thead>
<tbody>
<tr>
<td>매개변수화 타입</td>
<td>List<String></td>
</tr>
<tr>
<td>제네릭 타입</td>
<td>List<E></td>
</tr>
<tr>
<td>정규 타입 매개변수</td>
<td>E</td>
</tr>
<tr>
<td>비한정적 와일드카드 타입</td>
<td>List<?></td>
</tr>
<tr>
<td>한정적 와일드카드 타입</td>
<td><E extends Number></td>
</tr>
<tr>
<td>로 타입</td>
<td>List</td>
</tr>
<tr>
<td>재귀적 타입 한정</td>
<td>&lt;T extends Comparable<T>&gt;</td>
</tr>
<tr>
<td>제네릭 메서드</td>
<td>static <E> List<E> asList(E[] a)</td>
</tr>
<tr>
<td>타입 토큰</td>
<td>String.class</td>
</tr>
</tbody>
</table>
<h2 id="item27-비검사-경고를-제거하라">Item27. 비검사 경고를 제거하라</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@SuppressWarnings</span><span class="o">(</span><span class="s">&#34;unchecked&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="n">T</span><span class="o">[]</span> <span class="n">result</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">copyOf</span><span class="o">(</span><span class="n">elements</span><span class="o">,</span> <span class="n">size</span><span class="o">,</span> <span class="n">a</span><span class="o">.</span><span class="na">getClass</span><span class="o">());</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="item28-배열보다는-리스트를-사용하라">Item28. 배열보다는 리스트를 사용하라</h2>
<ol>
<li>
<p>배열은 저장되는 값을 런타임에야 알게 되지만, 리스트는 컴파일할 때 바로 알 수 있다.</p>
</li>
<li>
<p>배열은 실체화되어 런타임에 한 원소의 타입을 인지하고 확인한다. → 실체화
제네릭은 타입 정보가 런타임 시 소거되어 런타임에는 알 수 없다. → 실체화 불가 타입</p>
<p>비검사 형변환 경고를 제거하려면 배열 대신 리스트를 쓰면 된다.</p>
</li>
</ol>
<p>배열, 리스트를 섞어쓰다 컴파일 오류/경고를 만나면 배열을 리스트로 대체하는 방법을 시도해보자</p>
<h2 id="item29-30-이왕이면-제네릭-타입으로-만들라">Item29-30. 이왕이면 제네릭 타입으로 만들라</h2>
<p>직접 형변환하는 타입보다 제네릭 타입이 더 안전하고 쓰기 편하다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Fruit</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;{</span>
</span></span><span class="line"><span class="cl">	<span class="kd">private</span> <span class="kd">final</span> <span class="n">T</span><span class="o">[]</span> <span class="n">FruitArray</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">	<span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>클래스, 메서드 모두 제네릭으로 만들 수 있다.</p>
<p><code>타입 매개변수 목록은 메서드의 제한자와 반환 타입 사이에 온다</code>.</p>
<p>아래에서 <E> = 타입 매개변수 목록, Set<E> = 반환 타입</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="n">Set</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="nf">union</span><span class="o">(</span><span class="n">Set</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="n">s1</span><span class="o">,</span> <span class="n">Set</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="n">s2</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">	<span class="n">Set</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashSet</span><span class="o">&lt;&gt;(</span><span class="n">s1</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>이 메서드는 경고 없이 컴파일되며, 타입 안전하고 쓰기도 쉽다.</p>
<p>타입, 메서드 모두 형변환 없이 사용할 수 있는 편이 좋으며 그렇게 하려면 제네릭을 사용해야 한다.</p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2022-03-28</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/effective-java/index.md" target="_blank">Read Markdown</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="https://h3yon.github.io/effective-java/" data-title="이펙티브 자바 1~30" data-hashtags="java"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="https://h3yon.github.io/effective-java/" data-hashtag="java"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Hacker News" data-sharer="hackernews" data-url="https://h3yon.github.io/effective-java/" data-title="이펙티브 자바 1~30"><i class="fab fa-hacker-news fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Line" data-sharer="line" data-url="https://h3yon.github.io/effective-java/" data-title="이펙티브 자바 1~30"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@6.20.0/icons/line.svg" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on 微博" data-sharer="weibo" data-url="https://h3yon.github.io/effective-java/" data-title="이펙티브 자바 1~30"><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/java/">java</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/mock-spy-testcode/" class="prev" rel="prev" title="테스트코드의 Mock, MockBean, Autowired, Spy 이해하기"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>테스트코드의 Mock, MockBean, Autowired, Spy 이해하기</a>
            <a href="/spring-core1/" class="next" rel="next" title="스프링 핵심 원리 복습 일지#1">스프링 핵심 원리 복습 일지#1<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.98.0">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> LoveIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2019 - 2022</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://github.com/h3yon" target="_blank">h3yon</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/css/lightgallery.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/smooth-scroll@16.1.3/dist/smooth-scroll.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.1/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.1/plugins/parent-fit/ls.parent-fit.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/js/lightgallery.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.2.0/dist/lg-zoom.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":10},"comment":{},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
